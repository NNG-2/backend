<!DOCTYPE html>
<html>
<head>
    <title>Display Image by ID</title>
    <style>
        #imageContainer {
            width: 500px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
<h2>Display Image by ID</h2>
<div>
    <label for="imageId">Image ID:</label>
    <input type="text" id="imageId" placeholder="Enter Image ID">
    <button onclick="displayImage()">Submit</button>
</div>
<div id="imageContainer"></div>
<script>
    function displayImage() {
        const imageId = document.getElementById('imageId').value;
        const imageContainer = document.getElementById('imageContainer');

        // Clear the image container
        imageContainer.innerHTML = '';

        // Create an image element
        const imageElement = document.createElement('img');

        // Make the request to the Spring Boot controller
        fetch(`http://localhost:8080/api/image/${imageId}`)
            .then(response => {
                // Check if the response was successful
                if (!response.ok) {
                    throw new Error('Failed to retrieve the image.');
                }
                return response.blob();
            })
            .then(blob => {
                // Create an object URL for the retrieved image blob
                const objectURL = URL.createObjectURL(blob);

                // Set the source URL of the image element
                imageElement.src = objectURL;

                // Add the image element to the image container
                imageContainer.appendChild(imageElement);
            })
            .catch(error => {
                console.error(error);
                // Display an error message
                imageContainer.textContent = 'Failed to retrieve the image.';
            });
    }
</script>
</body>
</html>